{% extends 'base.html' %}

{% block head %}
<script src="https://unpkg.com/htmx.org@2.0.0"></script>
{% endblock %}

{% block main-styles %}h-100{% endblock %}

{% block content %}
<div id="publications">
    {% for publication in publications %}

    {% if publication.is_first_of_month %}
    <div class="position-sticky bg-success my-4 d-flex align-items-center justify-content-center"
         style="top: 55px; height: 50px; z-index: 2;">
        <h3 class="text-center m-0">{{ publication.post_at|date:"F Y" }}</h3>
    </div>
    {% endif %}

    <article class="bg-light rounded my-3 border border-2 border-dark" style="height: 30rem;">
        <div class="position-sticky bg-dark text-light" style="top: 105px; height: 30px; z-index:1;">
            <h5 class="text-center">{{ publication.post_at|date:"l d" }}</h5>
        </div>
        <div>
            {{ publication.description }}
            <br>
            {{ publication.post_at }}
        </div>
        {% if publications.has_next and forloop.last %}
        <span hx-get="{{ url }}?page={{ publications.next_page_number }}"
              hx-select="#publications > *" hx-target="#publications"
              hx-trigger="revealed" hx-swap="beforeend">
            </span>
        {% endif %}
    </article>

    {% endfor %}
</div>
{% endblock %}